
//DATA

//////////////////////////////

let designs = [
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img1.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img2.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img3.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img4.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img5.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img6.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img7.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img8.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img9.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img10.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img11.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img12.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img13.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img14.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img15.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img16.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img17.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img18.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img19.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img20.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img21.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img22.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img23.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img24.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img25.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img26.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img27.jpg",
    },
    {
        catagory: ["all", "womens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Img28.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign1.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign2.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign3.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign4.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign5.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign6.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign7.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign8.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign9.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign10.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign11.jpg",
    },
    {
        catagory: ["all", "mens"],
        price: "123 sar",
        campaign: ["20% off", "holiday sale"],
        data: "womens simple design",
        src: "./images/Mendesign12.jpg",
    }
];
/////////////////////////////
////variables
/////////////////////////////

let display = document.querySelector(".display");
let pagination = document.querySelector(".pagination");
let pages = document.querySelector(".pages");

let limit = 8;
let pageNumber = 1;

let design_display = document.querySelector(".design-display");

let notThedesign_display = document.querySelector(".notThedesign-display");


let filter_btn = document.querySelectorAll(".filter-btn")

let modalContainer = document.querySelector(".modal-container");

//////////////////////////////////////////////////////

/////////////////////////////////

filter_btn.forEach(btn => {
    let matchingDesigns = designs.filter(design => design.catagory.some(catagory => catagory === btn.id));
      
    btn.addEventListener("click", () => {
        designDisplay(pageNumber, matchingDesigns);
        filter_btn.forEach(btn => {
            btn.classList.remove("active");
        });
        btn.classList.add("active");
        
    });
    filter_btn.forEach(btn => {
        if (btn.classList.contains("active")) {
            btn.click()
        }
    });
   
})

//designDisplay

function designDisplay(pageNumber, matchingDesigns){


        design_display.innerHTML = "";
        notThedesign_display.innerHTML = "";


        let begin = limit * (pageNumber - 1);
        let end = (begin + limit) - 1; 
       
        let newFilteredi = []
        
        if (matchingDesigns.length === 0) {
            let notTheDesign = document.createElement("div");
            notTheDesign.textContent = "No Design";
            notThedesign_display.appendChild(notTheDesign);
        } else {
            matchingDesigns.forEach((design, id) => {
               if(id >= begin && id <= end){
                newFilteredi.push(design)
               }
            });
            newFilteredi.forEach(filter => {
                createCard(filter)
            })
        }
      
       
        paginate(matchingDesigns, pageNumber);
    


}

//createCard

function createCard(design){
    pages.innerHTML = "";
    let design_card = document.createElement("div")
    design_card.classList.add("design-card")
    let img = document.createElement("img");
    img.src = design.src;
    let price = document.createElement("div")
    price.textContent = design.price;
    let div = document.createElement("div")
    div.classList.add("div")
    let button = document.createElement("button")
    button.classList.add("or-btn")
    button.textContent = "order"
    design_card.appendChild(img)
    design_card.appendChild(button)
    design_display.appendChild(design_card)
}



//pagination


function paginate(matchingDesigns, pageNumber){
    let count = Math.ceil(matchingDesigns.length/limit);
    pages.innerHTML = "";

    if(pageNumber != 1){
        let prev = document.createElement("li");
        prev.innerText = "PREV";
        prev.setAttribute("onclick", "changePage(" +( pageNumber - 1) + ")");
        pages.appendChild(prev);
    }

  for(let i=0;i<count;i++){
    let li = document.createElement("li");
    li.innerText = i + 1;
    li.setAttribute("onclick", "changePage(" +( i + 1) + ")");
    pages.appendChild(li);
    if((i+1) == pageNumber){
        li.classList.add("active");
    }
  }

  if(pageNumber != count){
    let next = document.createElement("li");
    next.innerText = "NEXT";
    next.setAttribute("onclick", "changePage(" +( pageNumber + 1) + ")");
    pages.appendChild(next);
}


}

function changePage(i){
    filter_btn.forEach(btn => {
        if (btn.classList.contains("active")) {
            let matchingDesigns = designs.filter(design => design.catagory.some(catagory => catagory === btn.id));
            designDisplay(i, matchingDesigns);
        }
    });
   
   
}

////createModal


function createModal(){
    let modal = document.createElement("div");
    modal.classList.add("modal");
    let close = document.createElement("span");
    close.classList.add("close-btn");
    close.textContent = "X"
    let info = document.createElement("p");
    info.textContent = "to order this product or get further information contact @nigstisdesign@gmail.com"
    modal.appendChild(close)
    modal.appendChild(info);
    modalContainer.appendChild(modal)
}

/////event

design_display.addEventListener("click", function (event) {
    let target = event.target;

    while (target && target !== design_display) {
        if (target.classList.contains("or-btn")) {
            modalContainer.style.display = "block";
            createModal();
            return;
        }
        target = target.parentNode;
    }
});



modalContainer.addEventListener("click", function(event) {
    if (event.target.classList.contains("close-btn")) {
      let modal = document.querySelector(".modal")
      modalContainer.removeChild(modal)
      modalContainer.style.display = "none";
    }
  });
  
